(function(e,t){"object"===typeof exports&&"object"===typeof module?module.exports=t():"function"===typeof define&&define.amd?define([],t):"object"===typeof exports?exports["lichFormParser"]=t():e["lichFormParser"]=t()})("undefined"!==typeof self?self:this,(function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s="fb15")}({"02ac":function(e,t){e.exports=require("core-js/modules/es.symbol.iterator")},"139f":function(e,t){e.exports=require("core-js/modules/es.array.for-each")},"18d2":function(e,t){e.exports=require("core-js/modules/es.array.concat")},"1ce0":function(e,t){e.exports=require("core-js/modules/web.dom-collections.iterator")},2175:function(e,t){e.exports=require("core-js/modules/es.object.keys")},"289a":function(e,t){e.exports=require("vuedraggable")},"2a6f":function(e,t){e.exports=require("core-js/modules/web.url")},"319f":function(e,t){e.exports=require("core-js/modules/es.number.to-fixed")},"3e88":function(e,t){e.exports=require("core-js/modules/es.array.join")},"46bb":function(e,t){e.exports=require("core-js/modules/es.object.get-own-property-descriptors")},"46fa":function(e,t){e.exports=require("core-js/modules/es.string.split")},"4a38":function(e,t){e.exports=require("core-js/modules/es.array.filter")},"4a42":function(e,t,n){},"51e9":function(e,t){e.exports=require("core-js/modules/es.symbol.description")},"51f7":function(e,t){e.exports=require("core-js/modules/es.regexp.exec")},"5f72":function(e,t){e.exports=require("element-ui")},"5fef":function(e,t){e.exports=require("core-js/modules/es.regexp.to-string")},6049:function(e,t){e.exports=require("core-js/modules/es.symbol")},"626a":function(e,t){e.exports=require("core-js/modules/es.array.every")},6579:function(e,t){e.exports=require("core-js/modules/es.array.slice")},"6aac":function(e,t,n){"use strict";var r=n("4a42"),o=n.n(r);o.a},"6b07":function(e,t){e.exports=require("core-js/modules/es.object.get-own-property-descriptor")},"6bb1":function(e,t){e.exports=require("core-js/modules/es.array.index-of")},"6faa":function(e,t){e.exports=require("core-js/modules/es.number.constructor")},"7c79":function(e,t,n){},"831f":function(e,t){e.exports=require("throttle-debounce")},8495:function(e,t){e.exports=require("core-js/modules/es.promise")},"850c":function(e,t){e.exports=require("core-js/modules/es.object.to-string")},"8c84":function(e,t){e.exports=require("core-js/modules/es.array.iterator")},"907b":function(e,t){e.exports=require("core-js/modules/es.string.iterator")},"9aa8":function(e,t){e.exports=require("core-js/modules/es.object.get-prototype-of")},"9bb0":function(e,t){e.exports=require("@soda/get-current-script")},a50c:function(e,t,n){},ab7e:function(e,t){e.exports=require("core-js/modules/es.array.includes")},ac3c:function(e,t){e.exports=require("core-js/modules/es.string.match")},b788:function(e,t,n){"use strict";var r=n("a50c"),o=n.n(r);o.a},b917:function(e,t){e.exports=require("core-js/modules/es.object.assign")},bcd8:function(e,t){e.exports=require("core-js/modules/es.function.name")},bcda:function(e,t){e.exports=require("core-js/modules/web.dom-collections.for-each")},be6e:function(e,t){e.exports=require("core-js/modules/es.string.search")},bfab:function(e,t){e.exports=require("core-js/modules/es.string.replace")},e42b:function(e,t){e.exports=require("core-js/modules/es.array.from")},ece9:function(e,t){e.exports=require("core-js/modules/es.object.entries")},eef8:function(e,t){e.exports=require("core-js/modules/es.reflect.construct")},f705:function(e,t){e.exports=require("core-js/modules/es.array.map")},fb15:function(e,t,n){"use strict";n.r(t);var r={};if(n.r(r),n.d(r,"get",(function(){return I})),n.d(r,"post",(function(){return M})),n.d(r,"registerHttpService",(function(){return L})),"undefined"!==typeof window){var o=window.document.currentScript,i=n("9bb0");o=i(),"currentScript"in document||Object.defineProperty(document,"currentScript",{get:i});var s=o&&o.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);s&&(n.p=s[1])}n("18d2"),n("f705"),n("bcd8"),n("6049"),n("4a38"),n("139f"),n("6b07"),n("46bb"),n("2175"),n("bcda");function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var l=n("5f72");n("b917");function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t,n){return t&&p(e.prototype,t),n&&p(e,n),e}var m=function(){function e(){f(this,e),this.components={}}return d(e,[{key:"getService",value:function(e){return this.components[e]}},{key:"registerService",value:function(e){var t=new e;this.components[t.serviceName]=t.render}},{key:"has",value:function(e){return!!this.components[e]}}]),e}(),h=function e(t){f(this,e),this.serviceName=t};function b(e,t){return b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},b(e,t)}function y(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}n("eef8"),n("9aa8");function g(e){return g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},g(e)}n("850c"),n("5fef");function v(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}n("51e9"),n("02ac"),n("8c84"),n("907b"),n("1ce0");function j(e){return j="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},j(e)}function w(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function C(e,t){return!t||"object"!==j(t)&&"function"!==typeof t?w(e):t}function O(e){var t=v();return function(){var n,r=g(e);if(t){var o=g(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return C(this,n)}}var _=function(e){y(n,e);var t=O(n);function n(){var e;return f(this,n),e=t.apply(this,arguments),e.serviceName="LTextView",e}return d(n,[{key:"render",value:function(e,t,n){var r=n[t["__controlConfig__"]["userDefineProps"]["textModel"]]||t.defaultValue;return e("div",{},r)}}]),n}(h);n("ab7e"),n("3e88"),n("ece9"),n("51f7"),n("fd48"),n("46fa");function S(e){if(Array.isArray(e))return e}function x(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,o=!1,i=void 0;try{for(var s,a=e[Symbol.iterator]();!(r=(s=a.next()).done);r=!0)if(n.push(s.value),t&&n.length===t)break}catch(u){o=!0,i=u}finally{try{r||null==a["return"]||a["return"]()}finally{if(o)throw i}}return n}}n("e42b"),n("6579");function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function V(e,t){if(e){if("string"===typeof e)return k(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?k(e,t):void 0}}function q(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function P(e,t){return S(e)||x(e,t)||V(e,t)||q()}n("fe0e"),n("ac3c"),n("bfab");var F,E,T=/{{[^{}]*}}/g,D=/[{{|}}]/g,N=function(){function e(){f(this,e)}return d(e,[{key:"setFieldsStr",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.str=e,this.oldStr=e,this.fields=[]}},{key:"isTemplateFields",value:function(){return!!this.fields.length}},{key:"getTemplate",value:function(e){this.str=this.oldStr.replace(T,(function(t){var n=t.replace(D,"");return e[n]||""}))}},{key:"getWatchField",value:function(){return this.fields=(this.str.match(T)||[]).map((function(e){return e.replace(D,"")})),this.fields}},{key:"getObjStr",value:function(){if(!this.str)return this.str;var e={};try{e=JSON.parse(this.str)}catch(t){console.error(t)}return e}},{key:"start",value:function(e,t){return this.setFieldsStr(e),this.getTemplate(t),this.getObjStr()}}]),e}(),$=(n("8495"),n("be6e"),{get:function(e,t){if(t){var n=[];Object.keys(t).forEach((function(e){return n.push(e+"="+t[e])})),-1===e.search(/\?/)?e+="?"+n.join("&"):e+="&"+n.join("&")}return fetch(e).then((function(e){return e.json()}))},post:function(e,t){return fetch(e,{method:"POST",body:JSON.stringify(t),headers:new Headers({"Content-Type":"application/json"}),mode:"no-cors"}).then((function(e){return e.json()}))}}),I=$.get,M=$.post,L=function(e){var t=e.get,n=e.post;t&&($.get=t),n&&($.post=n)},R={},A=function(e,t){var n=R[e];if("undefined"===typeof n)throw new Error("不存在当前接口:".concat(e));return n(t)},J=function(e,t,n){var r=null;return r="post"===n?M(e,t):"get"===n?I(e,t):A(e,t),r},U=n("831f"),B={props:["value","formMap","userDefine","controlConfig"],data:function(){var e=new N;return{modelValue:"",optionLabel:"label",optionValue:"value",rawOptions:[],watcherCollections:[],handlerFields:e}},watch:{userDefine:{immediate:!0,handler:function(){this.debounceHandle()}},value:{immediate:!0,handler:function(){this.modelValue=this.value}}},mounted:function(){this.debounceHandle=Object(U["debounce"])(350,this.debounceHandle)},methods:{setOptions:function(){var e=this,t=this.userDefine,n=[];if("static"===t.optionType)n=t.optionCollection||[];else if("dynamic"===t.optionType){if(!t.apiStringName)throw new Error("异步数据，缺少绑定的请求接口");var r=this.handlerFields.start(t.apiStringParams,this.formMap),o=J(t.apiStringName,r,t.apiRequestType);o&&o.then((function(t){e.rawOptions=t,e.rawOptions.map((function(t){return t[e.optionValue]=String(t[e.optionValue])})),e.rawOptions.find((function(t){return t[e.optionValue]===e.modelValue}))||(e.modelValue="",e.modelChange())}))}this.rawOptions=n},modelChange:function(){var e=this;this.$emit("input",this.modelValue);var t=this.userDefine.fillFields;if("string"===typeof t)try{t=JSON.parse(t)}catch(o){return void(t=null)}if(t instanceof Array&&t.length){var n=this.rawOptions.find((function(t){return t[e.optionValue]===e.modelValue}))||{};t.forEach((function(t){e.$set(e.formMap,t,n[t]||"")}))}else if(t instanceof Object&&Object.keys(t).length){var r=this.rawOptions.find((function(t){return t[e.optionValue]===e.modelValue}))||{};Object.entries(t).forEach((function(t){var n=P(t,2),o=n[0],i=n[1];e.$set(e.formMap,o,r[i]||"")}))}},listenerFields:function(e){var t=this;e instanceof Array&&e.length&&(this.watcherCollections=e.map((function(e){return t.$watch((function(){return t.formMap[e]}),(function(){t.setOptions()}))})))},debounceHandle:function(){if(this.userDefine){this.handlerFields.setFieldsStr(this.userDefine.apiParamsString);while(this.watcherCollections.length)this.watcherCollections.pop()();this.listenerFields(this.handlerFields.getWatchField()),this.setOptions(),this.optionLabel=this.userDefine.optionLabel||this.optionLabel,this.optionValue=this.userDefine.optionValue||this.optionValue}}},destroyed:function(){while(this.watcherCollections.length)this.watcherCollections.pop()()}},H={name:"LElCheckboxGroup",mixins:[B],methods:{modelChange:function(){var e=this;this.$emit("input",this.modelValue);var t=this.userDefine.fillFields;if("string"===typeof t)try{t=JSON.parse(t)}catch(s){return void(t=null)}if(t instanceof Array&&t.length){var n=this.modelValue?this.modelValue.split(","):[],r=this.rawOptions.filter((function(t){return n.includes(t[e.optionValue])}))||[];t.forEach((function(t){var n=r.map((function(e){return e[t]})).join(",");e.$set(e.formMap,t,n||"")}))}else if(t instanceof Object&&Object.keys(t).length){var o=this.modelValue?this.modelValue.split(","):[],i=this.rawOptions.filter((function(t){return o.includes(t[e.optionValue])}))||[];Object.entries(t).forEach((function(t){var n=P(t,2),r=n[0],o=n[1],s=i.map((function(e){return e[o]})).join(",");e.$set(e.formMap,r,s||"")}))}}},render:function(e){var t=this,n=t.value?t.value.split(","):[],r=t.controlConfig.userDefineProps;return e("el-checkbox-group",{props:c(c({},t.controlConfig.props),{},{value:n}),attrs:c({},t.controlConfig.attrs),class:t.controlConfig.class,style:t.controlConfig.style,on:{input:function(e){t.modelValue=e?e.join(","):""},change:t.modelChange}},t.rawOptions.map((function(n){return r.isBtn?e("el-checkbox-button",{key:n[t.optionValue],attrs:{label:n[t.optionValue]}},[n[t.optionLabel]]):e("el-checkbox",{key:n[t.optionValue],attrs:{label:n[t.optionValue],border:r.isBorder}},[n[t.optionLabel]])})))}},z=H;function K(e,t,n,r,o,i,s,a){var u,c="function"===typeof e?e.options:e;if(t&&(c.render=t,c.staticRenderFns=n,c._compiled=!0),r&&(c.functional=!0),i&&(c._scopeId="data-v-"+i),s?(u=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"===typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),o&&o.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(s)},c._ssrRegister=u):o&&(u=a?function(){o.call(this,(c.functional?this.parent:this).$root.$options.shadowRoot)}:o),u)if(c.functional){c._injectStyles=u;var l=c.render;c.render=function(e,t){return u.call(t),l(e,t)}}else{var f=c.beforeCreate;c.beforeCreate=f?[].concat(f,u):[u]}return{exports:e,options:c}}var W,G,X,Q,Y=K(z,F,E,!1,null,null,null),Z=Y.exports,ee={name:"LElRadioGroup",mixins:[B],render:function(e){var t=this,n=t.value,r=t.controlConfig.userDefineProps;return e("el-radio-group",{props:c(c({},t.controlConfig.props),{},{value:n}),attrs:c({},t.controlConfig.attrs),class:t.controlConfig.class,style:t.controlConfig.style,on:{input:function(e){t.modelValue=e},change:t.modelChange}},t.rawOptions.map((function(n){return r.isBtn?e("el-radio-button",{key:n[t.optionValue],attrs:{label:n[t.optionValue]}},[n[t.optionLabel]]):e("el-radio",{key:n[t.optionValue],attrs:{label:n[t.optionValue],border:r.isBorder}},[n[t.optionLabel]])})))}},te=ee,ne=K(te,W,G,!1,null,null,null),re=ne.exports,oe={name:"LElSelect",mixins:[B],render:function(e){var t=this;return e("el-select",{props:c({value:t.value},t.controlConfig.props),attrs:c({},t.controlConfig.attrs),class:t.controlConfig.class,style:t.controlConfig.style,on:{input:function(e){t.modelValue=e},change:t.modelChange}},t.rawOptions.map((function(n){return e("el-option",{key:n[t.optionValue],attrs:{label:n[t.optionLabel],value:n[t.optionValue]}})})))}},ie=oe,se=K(ie,X,Q,!1,null,null,null),ae=se.exports,ue=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"tinymce-container",class:{fullscreen:e.fullscreen},style:{width:e.containerWidth}},[n("textarea",{staticClass:"tinymce-textarea",attrs:{id:e.tinymceId}}),e._v(" "),n("div",{staticClass:"editor-custom-btn-container"},[n("editorImage",{staticClass:"editor-upload-btn",attrs:{color:"#1890ff"},on:{successCBK:e.imageSuccessCBK}})],1)])},ce=[],le=(n("6faa"),n("319f"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"upload-container"},[n("el-button",{style:{background:e.color,borderColor:e.color},attrs:{icon:"el-icon-upload",size:"mini",type:"primary"},on:{click:function(t){e.dialogVisible=!0}}},[e._v(" upload ")]),n("el-dialog",{attrs:{visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[n("el-upload",{staticClass:"editor-slide-upload",attrs:{multiple:!0,"file-list":e.fileList,"show-file-list":!0,"on-remove":e.handleRemove,"on-success":e.handleSuccess,"before-upload":e.beforeUpload,action:"https://httpbin.org/post","list-type":"picture-card"}},[n("el-button",{attrs:{size:"small",type:"primary"}},[e._v(" Click upload ")])],1),n("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v(" Cancel ")]),n("el-button",{attrs:{type:"primary"},on:{click:e.handleSubmit}},[e._v(" Confirm ")])],1)],1)}),fe=[],pe=(n("626a"),n("2a6f"),{name:"EditorSlideUpload",props:{color:{type:String,default:"#1890ff"}},data:function(){return{dialogVisible:!1,listObj:{},fileList:[]}},methods:{checkAllSuccess:function(){var e=this;return Object.keys(this.listObj).every((function(t){return e.listObj[t].hasSuccess}))},handleSubmit:function(){var e=this,t=Object.keys(this.listObj).map((function(t){return e.listObj[t]}));this.checkAllSuccess()?(this.$emit("successCBK",t),this.listObj={},this.fileList=[],this.dialogVisible=!1):this.$message("Please wait for all images to be uploaded successfully. If there is a network problem, please refresh the page and upload again!")},handleSuccess:function(e,t){for(var n=t.uid,r=Object.keys(this.listObj),o=0,i=r.length;o<i;o++)if(this.listObj[r[o]].uid===n)return this.listObj[r[o]].url=e.files.file,void(this.listObj[r[o]].hasSuccess=!0)},handleRemove:function(e){for(var t=e.uid,n=Object.keys(this.listObj),r=0,o=n.length;r<o;r++)if(this.listObj[n[r]].uid===t)return void delete this.listObj[n[r]]},beforeUpload:function(e){var t=this,n=window.URL||window.webkitURL,r=e.uid;return this.listObj[r]={},new Promise((function(o){var i=new Image;i.src=n.createObjectURL(e),i.onload=function(){t.listObj[r]={hasSuccess:!1,uid:e.uid,width:this.width,height:this.height}},o(!0)}))}}}),de=pe,me=(n("6aac"),K(de,le,fe,!1,null,"b7d78d66",null)),he=me.exports,be=["advlist anchor autolink autosave code codesample colorpicker colorpicker contextmenu directionality emoticons fullscreen hr image imagetools insertdatetime link lists media nonbreaking noneditable pagebreak paste preview print save searchreplace spellchecker tabfocus table template textcolor textpattern visualblocks visualchars wordcount"],ye=be,ge=["searchreplace fontselect fontsizeselect bold italic underline strikethrough alignleft aligncenter alignright outdent indent  blockquote undo redo removeformat subscript superscript code codesample","hr bullist numlist link image charmap preview anchor pagebreak insertdatetime media table emoticons forecolor backcolor fullscreen"],ve=ge;function je(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=V(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,a=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return s=e.done,e},e:function(e){a=!0,i=e},f:function(){try{s||null==n["return"]||n["return"]()}finally{if(a)throw i}}}}var we=[];function Ce(){return window.tinymce}var Oe=function(e,t){var n=document.getElementById(e),r=t||function(){};if(!n){var o=document.createElement("script");o.src=e,o.id=e,document.body.appendChild(o),we.push(r);var i="onload"in o?s:a;i(o)}function s(t){t.onload=function(){this.onerror=this.onload=null;var e,n=je(we);try{for(n.s();!(e=n.n()).done;){var r=e.value;r(null,t)}}catch(o){n.e(o)}finally{n.f()}we=null},t.onerror=function(){this.onerror=this.onload=null,r(new Error("Failed to load "+e),t)}}function a(e){e.onreadystatechange=function(){if("complete"===this.readyState||"loaded"===this.readyState){this.onreadystatechange=null;var t,n=je(we);try{for(n.s();!(t=n.n()).done;){var r=t.value;r(null,e)}}catch(o){n.e(o)}finally{n.f()}we=null}}}n&&r&&(Ce()?r(null,n):we.push(r))},_e=Oe,Se="https://cdn.jsdelivr.net/npm/tinymce-all-in-one@4.9.3/tinymce.min.js",xe={name:"Tinymce",components:{editorImage:he},props:{id:{type:String,default:function(){return"vue-tinymce-"+ +new Date+(1e3*Math.random()).toFixed(0)}},value:{type:String,default:""},toolbar:{type:Array,required:!1,default:function(){return[]}},menubar:{type:String,default:"file edit insert view format table"},height:{type:[Number,String],required:!1,default:360},width:{type:[Number,String],required:!1,default:"auto"},language:{type:String,default:"zh_CN"}},data:function(){return{hasChange:!1,hasInit:!1,tinymceId:this.id,fullscreen:!1}},computed:{containerWidth:function(){var e=this.width;return/^[\d]+(\.[\d]+)?$/.test(e)?"".concat(e,"px"):e}},watch:{value:function(e){var t=this;!this.hasChange&&this.hasInit&&this.$nextTick((function(){return window.tinymce.get(t.tinymceId).setContent(e||"")}))},language:function(){var e=this;this.destroyTinymce(),this.$nextTick((function(){return e.initTinymce()}))}},mounted:function(){this.init()},activated:function(){window.tinymce&&this.initTinymce()},deactivated:function(){this.destroyTinymce()},destroyed:function(){this.destroyTinymce()},methods:{init:function(){var e=this;_e(Se,(function(t){t?e.$message.error(t.message):e.initTinymce()}))},initTinymce:function(){var e=this,t=this;window.tinymce.init({language:this.language,selector:"#".concat(this.tinymceId),height:this.height,body_class:"panel-body ",object_resizing:!1,toolbar:this.toolbar.length>0?this.toolbar:ve,menubar:this.menubar,plugins:ye,end_container_on_empty_block:!0,powerpaste_word_import:"clean",code_dialog_height:450,code_dialog_width:1e3,advlist_bullet_styles:"square",advlist_number_styles:"default",imagetools_cors_hosts:["www.tinymce.com","codepen.io"],default_link_target:"_blank",link_title:!1,nonbreaking_force_tab:!0,init_instance_callback:function(n){t.value&&n.setContent(t.value),t.hasInit=!0,n.on("NodeChange Change KeyUp SetContent",(function(){e.hasChange=!0,e.$emit("input",n.getContent())}))},setup:function(e){e.on("FullscreenStateChanged",(function(e){t.fullscreen=e.state}))}})},destroyTinymce:function(){var e=window.tinymce.get(this.tinymceId);this.fullscreen&&e.execCommand("mceFullScreen"),e&&e.destroy()},setContent:function(e){window.tinymce.get(this.tinymceId).setContent(e)},getContent:function(){window.tinymce.get(this.tinymceId).getContent()},imageSuccessCBK:function(e){var t=this;e.forEach((function(e){window.tinymce.get(t.tinymceId).insertContent('<img class="wscnph" src="'.concat(e.url,'" >'))}))}}},ke=xe,Ve=(n("b788"),K(ke,ue,ce,!1,null,"38e44f38",null)),qe=Ve.exports,Pe=function(){function e(){f(this,e),this.components={}}return d(e,[{key:"get",value:function(e){return this.components[e]}},{key:"register",value:function(e){this.components[e.name]=e}},{key:"has",value:function(e){return!!this.components[e]}}]),e}(),Fe=new Pe;Fe.register(ae),Fe.register(Z),Fe.register(re),Fe.register(qe);var Ee=Fe,Te=(n("6bb1"),n("289a"),function(e){return"undefined"===typeof e||null===e}),De=/^(\w+)\s+([>|<|=]=?)\s+(\w+)$/;var Ne=function(e,t){var n=this,r=e.controlConfig,o=e.formConfig;return r.props=r.props||{},r.on=r.on||{},r.props["value"]=t[o.model]||r.defaultValue,r.on["input"]=function(e){n.$set(t,o.model,e||null)},r},$e=function(e){var t=e.formItemConfig,n=e.formConfig,r=e.userDefine,o=e.formMap;Te(t.props["prop"])&&(t.props["prop"]=n.model);var i=t.props.required;if(!i&&(null===r||void 0===r?void 0:r.requiredExpression)){var s=r.requiredExpression||"",a=s.match(De)||[],u=a[2],c=o[a[1]],l=a[3];if("undefined"!==typeof l)switch(u){case"==":i=c==l;break;case">":i=c>l;break;case"<":i=c<l;break;case">=":i=c>=l;break;case"<=":i=c<=l;break;default:i=!1;break}}i&&t.props.rules.push({required:!0,message:"请输入".concat(t.props.label),trigger:["blur","change"]})},Ie=function(e){y(n,e);var t=O(n);function n(){var e;return f(this,n),e=t.apply(this,arguments),e.serviceName="LElSelect",e}return d(n,[{key:"render",value:function(e,t,n){var r=t.__controlConfig__,o=JSON.parse(JSON.stringify(r));return Ne.call(this,{controlConfig:o,formConfig:t},n),e(Ee.get("LElSelect"),{key:JSON.stringify(t),props:{value:n[t.model],formMap:n,controlConfig:r,userDefine:r.userDefineProps,key:JSON.stringify(t)},on:o.on})}}]),n}(h),Me=new m;Me.registerService(_),Me.registerService(Ie);var Le=Me,Re=function(e){return JSON.parse(JSON.stringify(e))};function Ae(e,t,n){var r,o=this,i=t.tagName,s=t.serviceName,a=void 0===s?i:s,u=t.__layoutConfig__,c=void 0===u?{}:u,l=t.__formItemConfig__,f=void 0===l?{}:l,p=t.__controlConfig__,d=void 0===p?{}:p,m=t.children||[],h=null;Le.has(a)&&(h=Le.getService(a).apply(this,arguments));var b=Re(d),y=Re(f);!h&&t.model&&Ne.call(this,{controlConfig:b,formConfig:t},n),$e({formItemConfig:y,formConfig:t,userDefine:b.userDefineProps,formMap:n});var g=(null===d||void 0===d?void 0:d.userDefineProps)?{userDefine:d.userDefineProps}:{};(null===(r=g.userDefine)||void 0===r?void 0:r.optionType)&&(g.formMap=n,g.controlConfig=b);var v=JSON.stringify(t)+"rules:".concat(JSON.stringify(y.props.rules||[]));return e("el-col",{key:t.id,props:Object.assign({},c.props),attrs:Object.assign({},c.attrs),class:c.class,style:!1===t.isShow?"display:none;".concat(c.style):c.style},[e("el-form-item",{key:v,props:Object.assign({},y.props),attrs:Object.assign({},y.attrs),class:y.class,style:y.style},[h||e(Ee.get(i)||i,{key:v,props:Object.assign(Object.assign({},b.props),g),attrs:Object.assign({},b.attrs),class:b.class,style:b.style,on:b.on},m.map((function(t){return He.call(o,e,t,n)})))])])}function Je(e,t){var n=this,r=this.formMap;return t.map((function(o){return!1===o.isRender?null:Ue.call(n,e,o,t,r)})).filter((function(e){return!!e}))}function Ue(e,t,n,r){var o=t.__layout__;return"rowFormItem"===o?Be.call(this,e,t,r,n):"colFormItem"===o?Ae.call(this,e,t,r,n):void 0}function Be(e,t,n){var r=t.__layoutConfig__,o=void 0===r?{}:r,i=t.__controlConfig__,s=void 0===i?{}:i,a=t.children||[],u=Je.call(this,e,a,n);return e("el-col",{props:o.props,attrs:o.attrs,class:o.class,style:o.style},[e("el-row",{props:s.props,attrs:s.attrs,class:s.class,style:s.style},[u])])}function He(e,t){var n=t.tagName,r=t.__controlConfig__,o=void 0===r?{}:r;return e(n,{props:Object.assign({},o.props)})}function ze(e,t){return new Promise((function(n,r){(null===e||void 0===e?void 0:e.length)>0?Promise.all(e.map((function(e){return e instanceof Promise?e:e(t)}))).then((function(){n(!0)})).catch((function(){r(!1)})):n(!0)}))}var Ke,We,Ge={name:"lichFormParser",props:["formConfig","formData"],data:function(){return{isLoading:!0,formMap:{},formConfigCopy:null,formApiValid:[],submitConfig:{before:[],after:[],apiValid:[]}}},watch:{formData:{immediate:!0,handler:function(e){this.formMap=e}},formConfig:{immediate:!0,handler:function(e){if(e){this.isLoading=!1;var t=JSON.parse(JSON.stringify(e));this.formConfigCopy=t.formConfig,this.fieldsCopy=t.fields,this.formApiValid=t.formApiValid}else this.isLoading=!0}},formApiValid:{immediate:!0,handler:function(e){var t=this;this.submitConfig.apiValid=[],this.submitConfig.apiValid.push.apply(this.submitConfig.apiValid,e.map((function(e){return function(){return r[e.type](e.name,t.formMap)}})))}}},provide:function(){return{beforeSubmit:this.submitConfig.before,submited:this.submitConfig.after}},methods:{submitForm:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"validateForm";this.$refs[t].validate((function(t){if(!t)return Object(l["Message"])({message:"表单没有填完整",type:"error",duration:5e3}),!1;ze(e.submitConfig.before.concat(e.submitConfig.apiValid)).then((function(t){t&&(console.log(e.formMap),e.$emit("onSubmit",e.formMap,(function(t){ze(e.submitConfig.after,t)})))}))}))},resetForm:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"validateForm";this.$refs[e].resetFields()}},render:function(e){var t=this,n=this.formConfigCopy;return this.isLoading?e("div",{directives:[{name:"loading",value:"true"}],style:"height:150px"}):(n["name"]||(n["name"]="formName"),e("el-form",{ref:n.name,props:c({model:this.formMap},n),class:"baseForm"},[e("el-row",[[Je.call(this,e,this.fieldsCopy)]]),e("el-form-item",{class:"autoFormPack__btnGroup"},[e("el-button",{attrs:{type:"primary"},on:{click:function(){t.submitForm(n["name"])}}},["立即创建"]),e("el-button",{on:{click:function(){t.resetForm(n["name"])}}},["重置"])])]))}},Xe=Ge,Qe=(n("fd41"),K(Xe,Ke,We,!1,null,null,null)),Ye=Qe.exports;t["default"]=Ye},fd41:function(e,t,n){"use strict";var r=n("7c79"),o=n.n(r);o.a},fd48:function(e,t){e.exports=require("core-js/modules/es.string.includes")},fe0e:function(e,t){e.exports=require("core-js/modules/es.array.find")}})["default"]}));